"use strict";function ChannelData(n,e,t){"Account Closed"===e?(this.logo=n||"",this.name=t.replace("Channel '","").replace("' is unavailable","")||"",this.url="https://s.codepen.io/FreeCodeCamp/fullpage/undefined",this.status=e):(this.logo=n||"",this.name=t.replace(API_URL,"")||"",this.url=t.replace(API_URL,REAL_URL)||"",this.status=e?e.length+this.name.length>60?e.substr(0,50)+"...":e:"offline",this.shortStatus=e?e.length+this.name.length>30?e.substr(0,20)+"...":e:"offline")}function arrange(n){var e,t;n.hasOwnProperty("stream")?null===n.stream?n.hasOwnProperty("_links")&&n._links.hasOwnProperty("channel")&&(e=new ChannelData(NO_PICTURE_URL,"offline",n._links.channel),box.push(e),offlineBox.push(e)):(t=n.stream.channel,e=new ChannelData(t.logo,t.status,n._links.channel),box.push(e),onlineBox.push(e)):n.hasOwnProperty("error")&&(e=new ChannelData(NO_PICTURE_URL,"Account Closed",n.message),box.push(e),offlineBox.push(e))}function drawBox(n){n.forEach(function(n){$("#channel-list").append(getItemString(n))})}function getItemString(n){var e='<div class="channel-box';return e+="offline"!==n.status&&"Account Closed"!==n.status?' online">':' offline">',e+='<img src="'+n.logo+'" alt="" class="logo channel-box-item">',e+='<div class="channel-box-item"><a target="_blank" href="'+n.url+'" class="title">',e+=n.name+"</a></div>",e+='<div class="channel-box-item desc-long"><p>'+n.status+"</p></div>",e+='<div class="channel-box-item desc-short"><p>'+n.shortStatus+"</p></div>"}function clean(){$("#channel-list").html("")}function getData(n){return $.getJSON(n)}function makeList(){for(var n=[],e=0;e<streamList.length;e++)n.push(getData(JSONP_URL+streamList[e]+"?callback=?"));$.when.apply($,n).done(function(){for(var n=0;n<arguments.length;n++)console.log(arguments[n]),"success"!==arguments[n][1]?console.log("connect error"):arrange(arguments[n][0]);drawBox(onlineBox),drawBox(offlineBox)})}var NO_PICTURE_URL="https://dummyimage.com/50x50/ecf0e7/5c5457.jpg&text=0x3F",API_URL="https://api.twitch.tv/kraken/channels/",JSONP_URL="https://api.twitch.tv/kraken/streams/",REAL_URL="https://www.twitch.tv/",box=[],onlineBox=[],offlineBox=[],streamList=["freecodecamp","storbeck","esl_sc2","asiagodtonegg3be0","ogamingsc2","p4wnyhof","uzra","brunofin","giantwaffle","food"];$(document).ready(makeList),$("#all").click(function(){clean(),drawBox(onlineBox),drawBox(offlineBox)}),$("#on").click(function(){clean(),drawBox(onlineBox)}),$("#off").click(function(){clean(),drawBox(offlineBox)});