"use strict";function ChannelData(t,a,n){this.logo=t||"",this.name=n.replace(API_URL,"")||"",this.url=n.replace(API_URL,REAL_URL)||"",this.status=a?a.length+this.name.length>60?a.substr(0,50)+"...":a:"offline",this.shortStatus=a?a.length+this.name.length>30?a.substr(0,20)+"...":a:"offline"}function arrange(t){var a,n;t.hasOwnProperty("stream")&&(null===t.stream?t.hasOwnProperty("_links")&&t._links.hasOwnProperty("channel")&&(a=new ChannelData(NO_PICTURE_URL,"offline",t._links.channel),box.push(a),offlineBox.push(a)):(n=t.stream.channel,a=new ChannelData(n.logo,n.status,t._links.channel),box.push(a),onlineBox.push(a)))}function drawBox(t){t.forEach(function(t){$("#channel-list").append(getItemString(t))})}function getItemString(t){var a='<div class="channel-box';return a+="offline"!==t.status?' online">':' offline">',a+='<img src="'+t.logo+'" alt="" class="logo channel-box-item">',a+='<div class="channel-box-item"><a target="_blank" href="'+t.url+'" class="title">',a+=t.name+"</a></div>",a+='<div class="channel-box-item desc-long"><p>'+t.status+"</p></div>",a+='<div class="channel-box-item desc-short"><p>'+t.shortStatus+"</p></div>"}function clean(){$("#channel-list").html("")}function getData(t){return $.getJSON(t)}function makeList(){for(var t=[],a=0;a<streamList.length;a++)t.push(getData(streamList[a]));$.when.apply($,t).done(function(){for(var t=0;t<arguments.length;t++)"success"!==arguments[t][1]?console.log("connect error"):arrange(arguments[t][0]);drawBox(onlineBox),drawBox(offlineBox)})}var NO_PICTURE_URL="https://dummyimage.com/50x50/ecf0e7/5c5457.jpg&text=0x3F",API_URL="https://api.twitch.tv/kraken/channels/",REAL_URL="https://www.twitch.tv/",box=[],onlineBox=[],offlineBox=[],streamList=["https://api.twitch.tv/kraken/streams/freecodecamp?callback=?","https://api.twitch.tv/kraken/streams/storbeck?callback=?","https://api.twitch.tv/kraken/streams/esl_sc2?callback=?","https://api.twitch.tv/kraken/streams/asiagodtonegg3be0?callback=?","https://api.twitch.tv/kraken/streams/ogamingsc2?callback=?","https://api.twitch.tv/kraken/streams/p4wnyhof?callback=?","https://api.twitch.tv/kraken/streams/uzra?callback=?"];$(document).ready(makeList),$("#all").click(function(){clean(),drawBox(onlineBox),drawBox(offlineBox)}),$("#on").click(function(){clean(),drawBox(onlineBox)}),$("#off").click(function(){clean(),drawBox(offlineBox)});